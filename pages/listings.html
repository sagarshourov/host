<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>You're Home - Find Your Perfect Property</title>
    <!-- 1. CSS tokens (already linked somewhere) -->
    <link rel="stylesheet" href="../css/base/variables.css">

    <!-- 2. Global typography (new) -->
    <link rel="stylesheet" href="../css/base/typography.css">

    <!-- 3. Shared components (buttons, etc.) -->
    <link rel="stylesheet" href="../css/components/buttons.css">

    <link rel="stylesheet" href="../css/layout/header.css"> <!-- ‚úÖ Add this -->


    <!-- 4. Your existing consolidated or page‚Äëlayout styles -->
    <link rel="stylesheet" href="../css/main.css">
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                üè† <a href="/" style="text-decoration: none; color: inherit;">You're Home</a>
                <div class="tagline">The Future of Real Estate</div>
            </div>
            <nav class="nav-links">
                <a href="/listings.html" class="nav-link">Buy</a>
                <a href="/sell.html" class="nav-link">Sell</a>
                <a href="#" class="nav-link">About</a>
                <a href="#" class="nav-link">Help</a>
                <a href="/login.html" class="nav-link">Log In</a>
                <a href="/list-property.html" class="btn-primary">List Your Property</a>
            </nav>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Search Header -->
        <div class="search-header">
            <div class="main-search-bar">
                <input type="text" class="search-input-main"
                    placeholder="Search address, neighborhood, city, or ZIP code" value="Atlantic County, NJ">
                <button class="search-btn-main">üîç Search</button>
            </div>

            <!-- Filter Bar -->
            <div class="filter-bar">
                <!-- Price Filter -->
                <div class="filter-dropdown">
                    <button class="filter-btn" onclick="toggleDropdown('price')">
                        <span id="priceText">Price</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="filter-dropdown-content" id="priceDropdown">
                        <div class="price-inputs">
                            <input type="text" class="price-input" placeholder="Min" id="priceMin">
                            <input type="text" class="price-input" placeholder="Max" id="priceMax">
                        </div>
                        <div class="filter-option" onclick="resetPriceFilter()">Any price</div>
                        <div class="filter-option" onclick="selectFilter('price', 'Under $300K')">Under $300K</div>
                        <div class="filter-option" onclick="selectFilter('price', '$300K - $500K')">$300K - $500K</div>
                        <div class="filter-option" onclick="selectFilter('price', '$500K - $750K')">$500K - $750K</div>
                        <div class="filter-option" onclick="selectFilter('price', '$750K - $1M')">$750K - $1M</div>
                        <div class="filter-option" onclick="selectFilter('price', 'Over $1M')">Over $1M</div>
                    </div>
                </div>

                <!-- Beds & Baths Filter -->
                <div class="filter-dropdown">
                    <button class="filter-btn" onclick="toggleDropdown('beds')">
                        <span id="bedsText">Beds & Baths</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="filter-dropdown-content" id="bedsDropdown">
                        <div class="filter-option" onclick="selectFilter('beds', 'Any')">Any</div>
                        <div class="filter-option" onclick="selectFilter('beds', '1+ bed')">1+ bed</div>
                        <div class="filter-option" onclick="selectFilter('beds', '2+ beds')">2+ beds</div>
                        <div class="filter-option" onclick="selectFilter('beds', '3+ beds')">3+ beds</div>
                        <div class="filter-option" onclick="selectFilter('beds', '4+ beds')">4+ beds</div>
                        <div class="filter-option" onclick="selectFilter('beds', '5+ beds')">5+ beds</div>
                    </div>
                </div>

                <!-- Home Type Filter -->
                <div class="filter-dropdown">
                    <button class="filter-btn" onclick="toggleDropdown('type')">
                        <span id="typeText">Home Type</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="filter-dropdown-content" id="typeDropdown">
                        <div class="filter-option" onclick="selectFilter('type', 'All Types')">All Types</div>
                        <div class="filter-option" onclick="selectFilter('type', 'Houses')">Houses</div>
                        <div class="filter-option" onclick="selectFilter('type', 'Condos')">Condos</div>
                        <div class="filter-option" onclick="selectFilter('type', 'Townhomes')">Townhomes</div>
                        <div class="filter-option" onclick="selectFilter('type', 'Multi-family')">Multi-family</div>
                        <div class="filter-option" onclick="selectFilter('type', 'Lots/Land')">Lots/Land</div>
                    </div>
                </div>

                <!-- More Filters -->
                <div class="filter-dropdown">
                    <button class="filter-btn" onclick="toggleDropdown('more')">
                        <span id="moreText">More</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="filter-dropdown-content" id="moreDropdown">
                        <div class="filter-option" onclick="selectFilter('more', 'New (1-7 days)')">New (1-7 days)</div>
                        <div class="filter-option" onclick="selectFilter('more', 'Price reduced')">Price reduced</div>
                        <div class="filter-option" onclick="selectFilter('more', 'Open house')">Open house</div>
                        <div class="filter-option" onclick="selectFilter('more', 'Messages enabled')">Messages enabled
                        </div>
                        <div class="filter-option" onclick="selectFilter('more', '10+ Photos')">10+ Photos</div>
                        <div class="filter-option" onclick="selectFilter('more', 'Virtual tour')">Virtual tour</div>
                    </div>
                </div>

                <!-- Sort -->
                <div class="filter-dropdown">
                    <button class="filter-btn" onclick="toggleDropdown('sort')">
                        <span id="sortText">Sort: Newest</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="filter-dropdown-content" id="sortDropdown">
                        <div class="filter-option" onclick="selectSort('Newest')">Newest</div>
                        <div class="filter-option" onclick="selectSort('Price (Low to High)')">Price (Low to High)</div>
                        <div class="filter-option" onclick="selectSort('Price (High to Low)')">Price (High to Low)</div>
                        <div class="filter-option" onclick="selectSort('Beds')">Beds</div>
                        <div class="filter-option" onclick="selectSort('Square Feet')">Square Feet</div>
                        <div class="filter-option" onclick="selectSort('Lowest Your Fee')">Lowest Your Fee</div>
                        <div class="filter-option" onclick="selectSort('Highest Your Fee')">Highest Your Fee</div>
                        <div class="filter-option" onclick="selectSort('$0 Fee First')">$0 Fee First</div>
                    </div>
                </div>

                <!-- Save Search Button -->
                <button class="save-search-btn">üíæ Save search</button>
            </div>
        </div>

        <!-- Results Section -->
        <main class="results-section">
            <div class="results-header">
                <div class="results-count">
                    <strong>0 homes</strong> found
                </div>
                <div class="view-toggle">
                    <button class="toggle-btn active" onclick="showGrid()">üè† Grid</button>
                    <button class="toggle-btn" onclick="showMap()">üó∫Ô∏è Map</button>
                </div>
            </div>

            <!-- Property Grid -->
            <div class="property-grid" id="propertyGrid">
                <div class="loading">Loading properties...</div>
            </div>

            <!-- Map View -->
            <div class="map-container" id="mapContainer">
                <div class="map-background">
                    <!-- Property Pins -->
                    <div class="property-pin zero-fee" style="top: 25%; left: 30%;">
                        $485K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">123 Ocean View Dr</strong><br>
                            3 bed ‚Ä¢ 2 bath ‚Ä¢ 1,850 sqft<br>
                            <span style="color: #22c55e;">Your fee: $0 (Seller covers all!)</span>
                        </div>
                    </div>

                    <div class="property-pin" style="top: 45%; left: 25%;">
                        $325K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">456 Boardwalk Ave</strong><br>
                            2 bed ‚Ä¢ 1.5 bath ‚Ä¢ 1,200 sqft<br>
                            <span style="color: #06b6d4;">Your fee: $1,625 (0.5%)</span>
                        </div>
                    </div>

                    <div class="property-pin" style="top: 35%; left: 65%;">
                        $675K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">789 Marina Blvd</strong><br>
                            4 bed ‚Ä¢ 3 bath ‚Ä¢ 2,400 sqft<br>
                            <span style="color: #06b6d4;">Your fee: $8,438 (1.25%)</span>
                        </div>
                    </div>

                    <div class="property-pin zero-fee" style="top: 55%; left: 45%;">
                        $550K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">321 Surf Avenue</strong><br>
                            3 bed ‚Ä¢ 2.5 bath ‚Ä¢ 1,950 sqft<br>
                            <span style="color: #22c55e;">Your fee: $0 (Seller covers all!)</span>
                        </div>
                    </div>

                    <div class="property-pin" style="top: 70%; left: 20%;">
                        $295K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">654 Pine Street</strong><br>
                            2 bed ‚Ä¢ 2 bath ‚Ä¢ 1,100 sqft<br>
                            <span style="color: #06b6d4;">Your fee: $3,688 (1.25%)</span>
                        </div>
                    </div>

                    <div class="property-pin" style="top: 20%; left: 75%;">
                        $750K
                        <div class="pin-tooltip">
                            <strong style="color: #06b6d4;">987 Beachfront Road</strong><br>
                            4 bed ‚Ä¢ 3.5 bath ‚Ä¢ 2,800 sqft<br>
                            <span style="color: #06b6d4;">Your fee: $3,750 (0.5%)</span>
                        </div>
                    </div>

                    <!-- Additional scattered pins for realism -->
                    <div class="property-pin" style="top: 40%; left: 50%;">$420K</div>
                    <div class="property-pin zero-fee" style="top: 60%; left: 70%;">$380K</div>
                    <div class="property-pin" style="top: 30%; left: 40%;">$590K</div>
                    <div class="property-pin" style="top: 50%; left: 35%;">$445K</div>
                    <div class="property-pin zero-fee" style="top: 65%; left: 55%;">$520K</div>
                </div>

                <!-- Map Controls -->
                <div class="map-controls">
                    <button class="map-btn" onclick="zoomIn()">+</button>
                    <button class="map-btn" onclick="zoomOut()">‚àí</button>
                    <button class="map-btn" onclick="resetView()">‚åÇ</button>
                </div>

                <!-- Map Legend -->
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-dot green"></div>
                        <span>$0 Buyer Fee (Seller covers all)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot blue"></div>
                        <span>Buyer Fee Required</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Make property cards clickable
        document.addEventListener('DOMContentLoaded', function () {
            // Add click handlers to all property cards
            const propertyCards = document.querySelectorAll('.property-card');

            propertyCards.forEach((card, index) => {
                card.style.cursor = 'pointer'; // Show it's clickable

                card.addEventListener('click', function () {
                    // For now, all properties go to the same detail page
                    // Later you'll make this dynamic with property IDs
                    window.location.href = 'property-detail.html';
                });

                // Add hover effect
                card.addEventListener('mouseenter', function () {
                    this.style.transform = 'translateY(-4px)';
                    this.style.boxShadow = '0 8px 20px rgba(0,0,0,0.1)';
                    this.style.transition = 'all 0.3s ease';
                });

                card.addEventListener('mouseleave', function () {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '';
                });
            });

            // Filter dropdown functions
            window.toggleDropdown = function (type) {
                const dropdown = document.getElementById(type + 'Dropdown');
                const allDropdowns = document.querySelectorAll('.filter-dropdown-content');

                // Close all other dropdowns
                allDropdowns.forEach(d => {
                    if (d !== dropdown) d.style.display = 'none';
                });

                // Toggle current dropdown
                dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
            };

            window.selectFilter = function (type, value) {
                document.getElementById(type + 'Text').textContent = value;
                document.getElementById(type + 'Dropdown').style.display = 'none';
            };

            window.selectSort = function (value) {
                document.getElementById('sortText').textContent = 'Sort: ' + value;
                document.getElementById('sortDropdown').style.display = 'none';
            };

            window.showGrid = function () {
                document.getElementById('propertyGrid').style.display = 'grid';
                document.getElementById('mapContainer').style.display = 'none';
                document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            };

            window.showMap = function () {
                document.getElementById('propertyGrid').style.display = 'none';
                document.getElementById('mapContainer').style.display = 'block';
                document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
            };

            // Close dropdowns when clicking outside
            document.addEventListener('click', function (e) {
                if (!e.target.closest('.filter-dropdown')) {
                    document.querySelectorAll('.filter-dropdown-content').forEach(d => {
                        d.style.display = 'none';
                    });
                }
            });
        });
    </script>

    <script src="/js/utils/api.js"></script>
    <script>
        // Initialize API and check auth on every page load
        document.addEventListener('DOMContentLoaded', async function () {
            if (window.youreHomeAPI) {
                await window.youreHomeAPI.checkAuthStatus();
                console.log('Auth check complete, user:', window.youreHomeAPI.currentUser);
            }
        });
    </script>

    <script src="/js/utils/navigation-fix.js"></script>
    <script src="/js/components/property-search.js"></script>

</body>

</html>